parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"CIvD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Base64=void 0;var r={};exports.Base64=r,function(r){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),n="/".charCodeAt(0),h="0".charCodeAt(0),c="a".charCodeAt(0),o="A".charCodeAt(0);function A(r){var t=r.charCodeAt(0);return t===a?62:t===n?63:t<h?-1:t<h+10?t-h+26+26:t<o+26?t-o:t<c+26?t-c+26:void 0}r.toByteArray=function(r){var t,a,n,h,c,o;if(r.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=r.length;c="="===r.charAt(i-2)?2:"="===r.charAt(i-1)?1:0,o=new e(3*r.length/4-c),n=c>0?r.length-4:r.length;var u=0;function l(r){o[u++]=r}for(t=0,a=0;t<n;t+=4,a+=3)l((16711680&(h=A(r.charAt(t))<<18|A(r.charAt(t+1))<<12|A(r.charAt(t+2))<<6|A(r.charAt(t+3))))>>16),l((65280&h)>>8),l(255&h);return 2===c?l(255&(h=A(r.charAt(t))<<2|A(r.charAt(t+1))>>4)):1===c&&(l((h=A(r.charAt(t))<<10|A(r.charAt(t+1))<<4|A(r.charAt(t+2))>>2)>>8&255),l(255&h)),o},r.fromByteArray=function(r){var e,a,n,h,c=r.length%3,o="";function A(r){return t.charAt(r)}for(e=0,n=r.length-c;e<n;e+=3)a=(r[e]<<16)+(r[e+1]<<8)+r[e+2],o+=A((h=a)>>18&63)+A(h>>12&63)+A(h>>6&63)+A(63&h);switch(c){case 1:o+=A((a=r[r.length-1])>>2),o+=A(a<<4&63),o+="==";break;case 2:o+=A((a=(r[r.length-2]<<8)+r[r.length-1])>>10),o+=A(a>>4&63),o+=A(a<<2&63),o+="="}return o}}(r);
},{}],"C7Cj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.startRegistration=i,exports.startLogin=l,exports.init=g;var e=require("./base64"),n={host:null,apiUrl:null};function t(e){return Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)})}function r(n){return e.Base64.fromByteArray(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function a(e){console.log(e.toString())}function i(e){var t=n.apiUrl+"register/challenge/"+e;fetch(t,{credentials:"include"}).then(function(e){e.json().then(function(e){return o(e)}).catch(a)}).catch(a)}function o(e){console.log("received message "+JSON.stringify(e)),e.challenge=t(e.challenge.value),e.user.id=t(e.user.id),console.log("converted message "+JSON.stringify(e)),navigator.credentials.create({publicKey:e}).then(function(e){c(e)}).catch(function(e){console.log(e.toString())})}function c(e){var t=new Uint8Array(e.response.attestationObject),i=new Uint8Array(e.response.clientDataJSON),o=new Uint8Array(e.rawId),c={id:e.id,rawId:r(o),type:e.type,response:{attestationObject:r(t),clientDataJSON:r(i)}};console.log("registering credentials ",c);var l=n.apiUrl+"register/credential/";fetch(l,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)}).then(function(e){console.log(e)}).catch(a)}function l(e){var t=n.apiUrl+"login/challenge/"+e;fetch(t,{credentials:"include"}).then(function(e){e.json().then(function(e){return s(e)}).catch(a)}).catch(a)}function s(e){e.challenge=t(e.challenge.value),e.allowCredentials.forEach(function(e,n){e.id=t(e.id)}),console.log("login challenge",e),navigator.credentials.get({publicKey:e}).then(function(e){u(e)}).catch(function(e){console.log(e.toString())})}function u(e){console.log("assertion ",e);var t=new Uint8Array(e.response.authenticatorData),i=new Uint8Array(e.response.clientDataJSON),o=new Uint8Array(e.response.signature),c=new Uint8Array(e.response.userHandle),l=new Uint8Array(e.rawId),s={id:e.id,rawId:r(l),type:e.type,response:{authenticatorData:r(t),clientDataJSON:r(i),signature:r(o),userHandle:r(c)}},u=n.apiUrl+"login/credential/";fetch(u,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(e){console.log(e)}).catch(a)}function g(e){n.host=e.host,n.apiUrl=n.host+"/webauthn/v1/"}
},{"./base64":"CIvD"}],"cQLd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=o,exports.webauthn=void 0;var e=r(require("./webauthn"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(o,u,s):o[u]=e[u]}return o.default=e,n&&n.set(e,o),o}exports.webauthn=e,console.log(e);var n={host:null};function o(t){n.host=t.host,console.log("passworless init with settings: ",n),e.init(n)}
},{"./webauthn":"C7Cj"}]},{},["cQLd"], "Passwordless")
//# sourceMappingURL=/passwordless-sdk.js.map